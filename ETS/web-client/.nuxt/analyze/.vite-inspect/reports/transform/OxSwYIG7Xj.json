{
  "resolvedId": "E:/Stusy/web-client/pages/admins.vue?macro=true",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "<script setup lang=\"ts\">\r\nimport Papa from 'papaparse';\r\n\r\ndefinePageMeta({\r\n  layout: 'home',\r\n  middleware: [\r\n    'admin'\r\n  ]\r\n})\r\nuseHead({\r\n  title: 'Админ панель'\r\n})\r\n\r\nconst runtimeConfig = useRuntimeConfig()\r\nconst token = useCookie('token')\r\n\r\n// Логика CRUD операций с группами\r\nconst groups = ref([])\r\nconst newGroupName = ref('')\r\n\r\nconst addGroup = () => {\r\n  // Логика добавления новой группы\r\n}\r\n\r\nconst deleteGroup = (groupId: number) => {\r\n  // Логика удаления группы по идентификатору\r\n}\r\n\r\n// Логика CRUD операций с пользователями\r\nconst users = ref([])\r\nconst newUserName = ref('')\r\nconst isDragging = ref(false);\r\n\r\nconst addUser = async () => {\r\n  try {\r\n    // Отправка запроса на сервер для добавления пользователя\r\n    const response = await fetch(`${runtimeConfig.apiUrl}/users`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${token.value}`\r\n      },\r\n      body: JSON.stringify({ name: newUserName.value })\r\n    })\r\n    if (!response.ok) {\r\n      throw new Error('Failed to add user')\r\n    }\r\n    const data = await response.json()\r\n    users.value.push(data)\r\n    newUserName.value = ''\r\n  } catch (error) {\r\n    console.error('Error adding user:', error)\r\n  }\r\n}\r\n\r\nconst deleteUser = async (userId: number) => {\r\n  try {\r\n    // Отправка запроса на сервер для удаления пользователя\r\n    const response = await fetch(`${runtimeConfig.apiUrl}/users/${userId}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        Authorization: `Bearer ${token.value}`\r\n      }\r\n    })\r\n    if (!response.ok) {\r\n      throw new Error('Failed to delete user')\r\n    }\r\n    users.value = users.value.filter(user => user.id !== userId)\r\n  } catch (error) {\r\n    console.error('Error deleting user:', error)\r\n  }\r\n}\r\n\r\n// Импорт данных из CSV файла для регистрации пользователей\r\nconst importUsersFromCSV = async (file: File) => {\r\n  try {\r\n    const formData = new FormData()\r\n    formData.append('file', file)\r\n    const response = await fetch(`${runtimeConfig.apiUrl}/users/import`, {\r\n      method: 'POST',\r\n      headers: {\r\n        Authorization: `Bearer ${token.value}`\r\n      },\r\n      body: formData\r\n    })\r\n    if (!response.ok) {\r\n      throw new Error('Failed to import users from CSV')\r\n    }\r\n    // Обновление списка пользователей после импорта\r\n    users.value = await response.json()\r\n  } catch (error) {\r\n    console.error('Error importing users from CSV:', error)\r\n  }\r\n}\r\n// Определение переменной для хранения данных из CSV файла\r\nconst csvData = ref([]);\r\n\r\n// Функция для обработки загруженного CSV файла\r\nconst handleImportSuccess = (data: any[]) => {\r\n  csvData.value = data;\r\n};\r\n\r\n// Функция для обработки ошибок при импорте CSV файла\r\nconst handleImportError = (error: any) => {\r\n  console.error('Error importing CSV file:', error);\r\n};\r\n\r\n// Определение функции для парсинга CSV файла\r\nconst parseCSVFile = (file: File) => {\r\n  return new Promise((resolve, reject) => {\r\n    Papa.parse(file, {\r\n      header: true,\r\n      complete: (result: any) => {\r\n        resolve(result.data);\r\n      },\r\n      error: (error: any) => {\r\n        reject(error);\r\n      }\r\n    });\r\n  });\r\n};\r\n// Функция для обработки события dragover\r\nconst handleDragOver = (event: DragEvent) => {\r\n  event.preventDefault();\r\n  isDragging.value = true;\r\n};\r\n\r\n// Функция для обработки события drop и загрузки CSV файла\r\nconst handleDrop = async (event: DragEvent) => {\r\n  event.preventDefault();\r\n  isDragging.value = false; // Убираем подсветку при drop\r\n  const file = event.dataTransfer?.files[0];\r\n  if (!file) return;\r\n  try {\r\n    // Парсинг CSV файла\r\n    const data = await parseCSVFile(file);\r\n    // Обработка успешного парсинга\r\n    handleImportSuccess(data);\r\n  } catch (error) {\r\n    // Обработка ошибок при парсинге\r\n    handleImportError(error);\r\n  }\r\n};\r\n\r\n// Функция для обработки события dragleave\r\nconst handleDragLeave = () => {\r\n  isDragging.value = false; // Убираем подсветку при выходе из области drop\r\n};\r\n\r\n// Функция для обработки события dragend\r\nconst handleDragEnd = () => {\r\n  isDragging.value = false; // Убираем подсветку при окончании перетаскивания\r\n};\r\n// const csvData = ref([]);\r\n//\r\n// const handleFileUpload = (event) => {\r\n//   const file = event.target.files[0];\r\n//\r\n//   Papa.parse(file, {\r\n//     header: true,\r\n//     dynamicTyping: true,\r\n//     complete: (results) => {\r\n//       csvData.value = results.data;\r\n//     },\r\n//     error: (error) => {\r\n//       console.error('Error parsing CSV:', error);\r\n//     }\r\n//   });\r\n// };\r\n</script>\r\n\r\n<template>\r\n  <div class=\"main-content adminPanel\" @dragover.prevent=\"handleDragOver\" @drop.prevent=\"handleDrop\">\r\n    <h1 class=\"text-3xl font-bold mb-4\">Админ панель</h1>\r\n    <div class=\"overlay\" :class=\"{ active: isDragging }\" ></div>\r\n    <!-- CRUD операции с группами -->\r\n    <div class=\"mb-8\">\r\n      <h2 class=\"text-xl font-semibold mb-2\">Группы</h2>\r\n      <!-- Форма добавления группы -->\r\n      <div class=\"mb-4\">\r\n        <h3 class=\"text-lg font-medium mb-2\">Добавить группу</h3>\r\n        <form @submit.prevent=\"addGroup\">\r\n          <div class=\"flex items-center mb-2\">\r\n            <label for=\"groupName\" class=\"mr-2\">Название:</label>\r\n            <input type=\"text\" id=\"groupName\" v-model=\"newGroupName\" class=\"rounded-md border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\">\r\n          </div>\r\n          <button type=\"submit\" class=\"px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600\">Добавить</button>\r\n        </form>\r\n      </div>\r\n\r\n      <!-- Список групп -->\r\n      <div>\r\n        <h3 class=\"text-lg font-medium mb-2\">Список групп</h3>\r\n        <ul>\r\n          <li v-for=\"group in groups\" :key=\"group.id\" class=\"mb-2\">\r\n            {{ group.name }}\r\n            <button @click=\"deleteGroup(group.id)\" class=\"ml-2 px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600\">Удалить</button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- CRUD операции с пользователями -->\r\n    <div>\r\n      <h2 class=\"text-xl font-semibold mb-2\">Пользователи</h2>\r\n      <!-- Форма добавления пользователя -->\r\n      <div class=\"mb-4\">\r\n        <h3 class=\"text-lg font-medium mb-2\">Добавить пользователя</h3>\r\n        <form @submit.prevent=\"addUser\">\r\n          <div class=\"flex items-center mb-2\">\r\n            <label for=\"userName\" class=\"mr-2\">Имя:</label>\r\n            <input type=\"text\" id=\"userName\" v-model=\"newUserName\" class=\"rounded-md border-gray-300 focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\">\r\n          </div>\r\n          <!-- Другие поля для добавления пользователя -->\r\n          <button type=\"submit\" class=\"px-4 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600\">Добавить</button>\r\n        </form>\r\n      </div>\r\n\r\n      <!-- Список пользователей -->\r\n      <div>\r\n        <h3 class=\"text-lg font-medium mb-2\">Список пользователей</h3>\r\n        <ul>\r\n          <li v-for=\"user in users\" :key=\"user.id\" class=\"mb-2\">\r\n            {{ user.name }}\r\n            <button @click=\"deleteUser(user.id)\" class=\"ml-2 px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600\">Удалить</button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <div class=\"csv-dropzone\" :class=\"{ highlighted: isDragging }\">\r\n        <h2>Импорт пользователей из CSV</h2>\r\n        <div class=\"drop-zone\"\r\n             @dragover.prevent=\"handleDragOver\"\r\n             @drop.prevent=\"handleDrop\"\r\n             @dragleave=\"handleDragLeave\"\r\n             @dragend=\"handleDragEnd\"><!-- Добавляем обработчик для события dragend -->>\r\n          Перетащите файл сюда или нажмите для выбора\r\n        </div>\r\n      </div>\r\n      <div class=\"csv-data\" v-if=\"csvData.length > 0\">\r\n        <h2>Данные из CSV файла:</h2>\r\n        <ul>\r\n          <li v-for=\"(row, index) in csvData\" :key=\"index\">\r\n          <span v-for=\"(value, key) in row\" :key=\"key\">\r\n            {{ key }}: {{ value }}\r\n          </span>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n@use '@/assets/scss/main.scss' as *;\r\n.drop-zone {\r\n  border: 2px dashed #ccc;\r\n  padding: 20px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n\r\n.csv-dropzone {\r\n  border: 2px dashed transparent;\r\n  padding: 20px;\r\n  transition: border-color 0.3s ease;\r\n}\r\n\r\n.csv-dropzone.highlighted {\r\n  border-color: #4CAF50; // Зеленая рамка при перетаскивании файла\r\n}\r\n.form {\r\n  @include theme('background', $general-background-light);\r\n  padding: 15px;\r\n  border-radius: 15px;\r\n}\r\n\r\n.adminPanel {\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.field {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0 10px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.course-table {\r\n  display: flex;\r\n}\r\n\r\n.course-table > div {\r\n  @include theme('border', $primary-color, true, '1px solid');\r\n  padding: 5px;\r\n  margin: 5px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.course-card {\r\n  cursor: pointer;\r\n  padding: 10px;\r\n  margin: 10px 0;\r\n  border-radius: 5px;\r\n  @include theme('background', $general-background);\r\n}\r\n</style>",
      "start": 1715794730665,
      "end": 1715794731069,
      "sourcemaps": null
    },
    {
      "name": "nuxt:layer-aliasing",
      "start": 1715794731069,
      "end": 1715794731069,
      "order": "pre"
    },
    {
      "name": "nuxt:server-devonly:transform",
      "start": 1715794731069,
      "end": 1715794731069,
      "order": "pre"
    },
    {
      "name": "nuxt:client-fallback-auto-id",
      "start": 1715794731069,
      "end": 1715794731069,
      "order": "pre"
    },
    {
      "name": "vite:css",
      "start": 1715794731069,
      "end": 1715794731069,
      "order": "normal"
    },
    {
      "name": "vite:esbuild",
      "start": 1715794731069,
      "end": 1715794731069,
      "order": "normal"
    },
    {
      "name": "vite:json",
      "start": 1715794731069,
      "end": 1715794731069,
      "order": "normal"
    },
    {
      "name": "vite:worker",
      "start": 1715794731069,
      "end": 1715794731069,
      "order": "normal"
    },
    {
      "name": "vite:vue",
      "result": "import _sfc_main from \"E:/Stusy/web-client/pages/admins.vue?vue&type=script&setup=true&lang.ts\";\nexport * from \"E:/Stusy/web-client/pages/admins.vue?vue&type=script&setup=true&lang.ts\";\nimport \"E:/Stusy/web-client/pages/admins.vue?vue&type=style&index=0&scoped=7df6a778&lang.scss\";\nimport _export_sfc from \"\\0plugin-vue:export-helper\";\nexport default /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-7df6a778\"]]);\n",
      "start": 1715794731069,
      "end": 1715794731464,
      "order": "normal",
      "sourcemaps": {
        "mappings": ""
      }
    },
    {
      "name": "vite:vue-jsx",
      "start": 1715794731465,
      "end": 1715794731465,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1715794731473,
      "end": 1715794731473,
      "order": "normal"
    },
    {
      "name": "nuxt:remove-plugin-metadata",
      "start": 1715794731474,
      "end": 1715794731474,
      "order": "normal"
    },
    {
      "name": "nuxt:chunk-error",
      "start": 1715794731474,
      "end": 1715794731474,
      "order": "normal"
    },
    {
      "name": "nuxt:components:imports",
      "start": 1715794731475,
      "end": 1715794731476,
      "order": "normal"
    },
    {
      "name": "replace",
      "start": 1715794731476,
      "end": 1715794731477,
      "order": "normal"
    },
    {
      "name": "ssr-styles",
      "start": 1715794731477,
      "end": 1715794731477,
      "order": "normal"
    },
    {
      "name": "vite:define",
      "start": 1715794731477,
      "end": 1715794731477,
      "order": "normal"
    },
    {
      "name": "vite:css-post",
      "start": 1715794731478,
      "end": 1715794731478,
      "order": "normal"
    },
    {
      "name": "vite:build-html",
      "start": 1715794731479,
      "end": 1715794731479,
      "order": "normal"
    },
    {
      "name": "vite:worker-import-meta-url",
      "start": 1715794731479,
      "end": 1715794731479,
      "order": "normal"
    },
    {
      "name": "vite:asset-import-meta-url",
      "start": 1715794731480,
      "end": 1715794731480,
      "order": "normal"
    },
    {
      "name": "commonjs",
      "start": 1715794731481,
      "end": 1715794731481,
      "order": "normal"
    },
    {
      "name": "vite:dynamic-import-vars",
      "start": 1715794731481,
      "end": 1715794731481,
      "order": "normal"
    },
    {
      "name": "vite:import-glob",
      "start": 1715794731481,
      "end": 1715794731482,
      "order": "normal"
    },
    {
      "name": "nuxt:composable-keys",
      "start": 1715794731482,
      "end": 1715794731482,
      "order": "post"
    },
    {
      "name": "nuxt:imports-transform",
      "start": 1715794731484,
      "end": 1715794731491,
      "order": "post"
    },
    {
      "name": "unctx:transform",
      "start": 1715794731492,
      "end": 1715794731492,
      "order": "post"
    },
    {
      "name": "nuxt:pages-macros-transform",
      "result": "export { default } from \"E:/Stusy/web-client/pages/admins.vue?macro=true&vue&type=script&setup=true&lang.ts\"",
      "start": 1715794731497,
      "end": 1715794731498,
      "order": "post",
      "sourcemaps": {
        "version": 3,
        "sources": [
          ""
        ],
        "names": [],
        "mappings": "AAAA"
      }
    },
    {
      "name": "nuxt:runtime-paths-dep",
      "start": 1715794731498,
      "end": 1715794731498,
      "order": "post"
    },
    {
      "name": "nuxt:route-injection-plugin",
      "start": 1715794731499,
      "end": 1715794731499,
      "order": "post"
    },
    {
      "name": "nuxt:components-loader",
      "start": 1715794731500,
      "end": 1715794731501,
      "order": "post"
    },
    {
      "name": "nuxt:tree-shake-composables:transform",
      "start": 1715794731501,
      "end": 1715794731501,
      "order": "post"
    },
    {
      "name": "vite:build-import-analysis",
      "start": 1715794731501,
      "end": 1715794731503,
      "order": "normal"
    },
    {
      "name": "vite:reporter",
      "start": 1715794731503,
      "end": 1715794731503,
      "order": "normal"
    }
  ]
}
