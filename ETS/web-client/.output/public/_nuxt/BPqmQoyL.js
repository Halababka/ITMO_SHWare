import{_ as B,I as L,u as R,r as m,o as A,e,f as o,t as c,h as r,n as _,k as v,l as w,c as t,R as N,g as h,w as p,a as T}from"./Bn8s6ksr.js";import{u as I}from"./Ct7qimw6.js";import{a as g,A as S}from"./CUFXMO9q.js";const V="data:image/svg+xml,%3csvg%20width='14'%20height='8'%20viewBox='0%200%2014%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13%201L7%207L1%201'%20stroke='black'%20stroke-width='2'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",j={class:"main-content"},z={class:"courses-main",id:"courses-main"},H={key:0,class:"error-message"},M={class:"chapter"},U=["onClick"],D={key:0,action:""},E={class:"description"},F={class:"material"},P=["href"],W=["src"],Y={__name:"oldCourse-[id]",setup(q){const k=T(),b=L(),C=R("token");let l=m({id:0,image_url:"",name:"",description:"",starts_at:"",ends_at:"",chapters:[]}),y=m([]),u=m([]),f=m("");function x(s){try{return new URLSearchParams(new URL(s).search).get("v")??""}catch(n){return console.error(`Ошибка извлечения данных из ссылки ${n}`),""}}function $(){fetch(`${k.public.apiBase}/courses/${b.params.id}`,{headers:{Authorization:C.value||""}}).then(s=>{switch(s.status){}return s.json()}).then(s=>{if(l.value=s,I({title:l.value.name}),s.chapters===void 0){f.value="В курсе отсутствует контент";return}try{y.value=l.value.chapters.reverse()}catch(n){console.error(n)}}).catch(s=>{console.error("Невозможно отправить запрос",s)})}return A(()=>{$()}),(s,n)=>(t(),e("div",j,[o("div",z,[o("h2",null,c(r(l).name),1),r(f)?(t(),e("h3",H,c(r(f)),1)):_("",!0),(t(!0),e(v,null,w(r(y),(i,d)=>(t(),e("div",M,[o("div",{class:"chapterHeader",onClick:a=>r(u)[d]=!r(u)[d]},[i.name?(t(),e("img",{key:0,src:V,alt:"Свернуть",style:N([r(u)[d]?"transform:rotate(-90deg); transition:.1s":""])},null,4)):_("",!0),o("h3",null,c(i.name),1)],8,U),r(u)[d]?(t(),e("form",D,[h(S,null,{default:p(()=>[h(g,{title:"Описание"},{default:p(()=>[o("p",E,c(i.description),1)]),_:2},1024),h(g,{title:"Материалы"},{default:p(()=>[(t(!0),e(v,null,w(i.materials,a=>(t(),e("div",F,[o("a",{href:`${r(k).public.domainName}${a.url}`},c(a.name),9,P)]))),256))]),_:2},1024),h(g,{title:"Видео"},{default:p(()=>[(t(!0),e(v,null,w(i.materials,a=>(t(),e("div",null,[a.url.includes("youtube.com/watch?v=")?(t(),e("iframe",{key:0,width:"560",height:"315",src:`https://www.youtube.com/embed/${x(a.url)}`,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,W)):_("",!0)]))),256))]),_:2},1024)]),_:2},1024)])):_("",!0)]))),256))])]))}},O=B(Y,[["__scopeId","data-v-322af8d0"]]);export{O as default};
