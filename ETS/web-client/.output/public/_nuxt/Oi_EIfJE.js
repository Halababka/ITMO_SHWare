import{_ as f,b as m,u as v,y as C,r as k,z as w,e as r,f as e,k as x,l as y,h as E,c as n,t as g,v as S,x as I,a as b}from"./Bn8s6ksr.js";import{u as B}from"./Ct7qimw6.js";import{u as D}from"./DOgkogYK.js";import"./BXRJdK4x.js";import"./7jZtv5KM.js";const _=o=>(S("data-v-9fc5c787"),o=o(),I(),o),$={class:"main-content white-box"},z=_(()=>e("h2",{class:""},"Управление курсами",-1)),A={class:"block-courses"},L={class:"course-row"},N={class:"course-controls"},R=_(()=>e("p",{class:"change"},"Изменить",-1)),T=["onClick"],j={__name:"controlCourse",async setup(o){let t,i;B({title:"Управление курсами"});const d=b();m();const p=v("token"),a=([t,i]=C(()=>D()),t=await t,i(),t).value,l=k([]);function h(c){fetch(`${d.public.apiBase}/courses/${c}`,{method:"DELETE",headers:{Authorization:p.value,"Content-Type":"application/json"}}).then(s=>{s.ok?a.refresh():console.error("Ошибка удаления курса")}).catch(s=>{if(s instanceof SyntaxError)throw new Error("Invalid JSON data");console.error("Невозможно отправить запрос",s)})}return w(()=>{if(!a.pending)try{l.value=a.coursesData.courses}catch(c){console.error("Не получается получить курсы",c)}}),(c,s)=>(n(),r("div",$,[z,e("div",A,[(n(!0),r(x,null,y(E(l),u=>(n(),r("div",L,[e("h3",null,g(u.name),1),e("div",N,[R,e("p",{class:"delete",onClick:F=>h(u.id)},"Удалить",8,T)])]))),256))])]))}},G=f(j,[["__scopeId","data-v-9fc5c787"]]);export{G as default};
