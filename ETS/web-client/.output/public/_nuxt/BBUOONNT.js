import{_ as Rt}from"./CxKW6yKe.js";import{_ as Pt,u as qt,b as zt,r as v,o as Gt,K as It,J as le,e as r,g as i,h as n,m as Ce,n as _,f as s,t as p,w as g,i as U,k as b,a as Zt,s as Kt,c as a,l as w,C as k,B as Pe,D as S,E as L,L as qe,j as he,T as Wt,M as Qt,N as ge,p as Ht,O as ze,v as Jt,x as Yt}from"./Bn8s6ksr.js";import Xt from"./CIirbjzG.js";import es from"./Bsd0B2of.js";import ts from"./B0mp-r-t.js";import ss from"./BQTGncyQ.js";import ls from"./BBuG_LZR.js";import os from"./CY5I-LVS.js";import{u as ns}from"./Ct7qimw6.js";import{b as is,i as as,c as Ge,e as rs,s as cs}from"./DOgkogYK.js";import{A as ds}from"./DsX3oINA.js";import{A as us,a as _e}from"./CUFXMO9q.js";import{F as V,f as $e,g as Ie,b as oe,d as Se,c as De,e as Ze,h as ps,i as Ke,j as We,k as Qe,l as He,m as be,n as Je,o as Ue}from"./DAxKz_H_.js";import{A as ms}from"./CHEYgbY9.js";import"./DvLZ7Zqz.js";import"./Beh2qRuB.js";import"./CVaRbyVJ.js";import"./BarrcHik.js";import"./B2cK24SD.js";import"./CP2X2kCJ.js";import"./okssMqCN.js";import"./CGQTC3f5.js";import"./cLBxPfJA.js";import"./C9DUTysQ.js";import"./8sW4mJZM.js";import"./4am-JueE.js";import"./Xh5iAUju.js";import"./7fOzFieg.js";import"./BmCDhavC.js";import"./wL0GXdHM.js";import"./DwA5qEtX.js";import"./BXQHskyo.js";import"./Co_e_0iK.js";import"./B7j0Dt9D.js";import"./BFrbZsHQ.js";import"./CQy9NsTI.js";import"./BXRJdK4x.js";import"./7jZtv5KM.js";const h=ne=>(Jt("data-v-e8df5978"),ne=ne(),Yt(),ne),fs={class:"main-content",style:{"flex-direction":"column","align-content":"center",gap:"20px"}},vs={class:"flex justify-between align-center items-center w-full"},hs={class:"wrapper-tab"},gs={class:"sections"},_s=["onClick"],bs={class:"section"},ws={class:"flex flex-nowrap items-center gap-2"},ys=["draggable","onDragstart","onDrop"],ks=["onUpdate:modelValue","onKeydown","onBlur"],xs={key:1,class:"select-none text-2xl"},Cs={class:"section-buttons flex gap-2 items-center"},$s={class:"flex flex-col gap-3"},Ss=["onClick"],Ds={class:"section"},Us={class:"flex flex-nowrap items-center gap-2"},Vs=["draggable","onDragstart","onDrop"],Os=["onUpdate:modelValue","onKeydown","onBlur"],Ls={key:1,class:"select-none text-2xl"},Fs={class:"section-buttons flex gap-2 items-center"},Es=["onDragstart","onDrop"],Ts={class:"flex flex-col w-full gap-4"},js={key:0,class:"title-content"},As=["onClick"],Ms={class:"content-wrapper-header"},Ns=h(()=>s("i",{class:"pi pi-graduation-cap text-lg"},null,-1)),Bs={class:"text-[18px]"},Rs=["href"],Ps={class:"content-wrapper-header"},qs={class:"file-extension lowercase"},zs={key:3,class:"text-lg"},Gs={key:4,class:"files-container"},Is=["href"],Zs={class:"content-wrapper-header"},Ks={class:"file-icon-wrapper"},Ws={class:"file-name text-lg"},Qs={class:"file-extension"},Hs={key:5,class:"video-container"},Js={class:"flex gap-2 items-center text-lg"},Ys=["srcdoc"],Xs={key:6,class:"folder-container"},el={class:"content-wrapper-header"},tl={class:"file-folder-wrapper"},sl=["href"],ll={class:"content-wrapper-header"},ol={class:"file-icon-wrapper"},nl={class:"file-name text-lg"},il={class:"file-extension"},al={class:"section-buttons flex gap-2 items-center"},rl={class:"w-full flex justify-center"},cl=["onDragstart","onDrop"],dl={class:"flex flex-col w-full gap-4"},ul={key:0,class:"title-content"},pl=["onClick"],ml={class:"content-wrapper-header"},fl=h(()=>s("i",{class:"pi pi-graduation-cap text-lg"},null,-1)),vl={class:"text-[18px]"},hl=["href"],gl={class:"content-wrapper-header"},_l={class:"file-extension lowercase"},bl={key:3,class:"text-lg"},wl={key:4,class:"files-container"},yl=["href"],kl={class:"content-wrapper-header"},xl={class:"file-icon-wrapper"},Cl={class:"file-name text-lg"},$l={class:"file-extension"},Sl={key:5,class:"video-container"},Dl={class:"flex gap-2 items-center text-lg"},Ul=["srcdoc"],Vl={key:6,class:"folder-container"},Ol={class:"content-wrapper-header"},Ll={class:"file-folder-wrapper"},Fl=["href"],El={class:"content-wrapper-header"},Tl={class:"file-icon-wrapper"},jl={class:"file-name text-lg"},Al={class:"file-extension"},Ml={class:"section-buttons flex gap-2 items-center"},Nl={class:"w-full flex justify-center"},Bl={class:"flex items-center mt-3 justify-center"},Rl=h(()=>s("div",{class:"dashed-line left"},null,-1)),Pl=h(()=>s("div",{class:"dashed-line right"},null,-1)),ql={class:"p-3 grid grid-cols-3 gap-4"},zl={class:""},Gl=h(()=>s("label",{for:"name",class:"block text-lg font-medium"},"Название курса",-1)),Il=["placeholder"],Zl={class:""},Kl=h(()=>s("label",{for:"description",class:"block text-lg font-medium"},"Описание курса",-1)),Wl={class:"input-form"},Ql=h(()=>s("label",{class:"block text-lg font-medium",for:"logo"},"Логотип курса",-1)),Hl={class:"image-preview-container"},Jl=["src"],Yl={class:"modal-content"},Xl=["src"],eo={class:"flex items-center gap-2 align-center"},to=h(()=>s("label",{class:"block text-lg font-medium"},"Курс доступен к прохождению",-1)),so={class:""},lo=h(()=>s("label",{for:"start_date",class:"block text-lg font-medium"},"Дата начала курса",-1)),oo={class:""},no=h(()=>s("label",{for:"end_date",class:"block text-lg font-medium"},"Дата окончания курса",-1)),io={class:""},ao=h(()=>s("label",{for:"duration_hours",class:"block text-lg font-medium"},"Количество часов",-1)),ro={class:""},co=h(()=>s("label",{for:"category",class:"block text-lg font-medium"},"Категория курса",-1)),uo={class:"enrolledStudents-container"},po={class:"search-filter-form"},mo={class:"flex flex-wrap gap-3"},fo={class:"mb-4"},vo=h(()=>s("label",{for:"search",class:"block text-lg font-medium mb-1"},"ФИО",-1)),ho={class:"mb-4"},go=h(()=>s("label",{for:"groups",class:"block text-lg font-medium mb-1"},"Группа",-1)),_o=h(()=>s("option",{value:null},"Все группы",-1)),bo=["value"],wo={class:"mb-4"},yo=h(()=>s("label",{for:"lastNameLetter",class:"block text-lg font-medium mb-1"},"Первая буква фамилии:",-1)),ko=h(()=>s("option",{value:null},"Все буквы",-1)),xo=["value"],Co={class:"w-full"},$o={class:"flex justify-between w-full items-center mb-2"},So=h(()=>s("label",{class:"block text-2xl font-medium mb-3"},"Выбор участников",-1)),Do={class:"flex flex-col gap-5"},Uo={class:"flex justify-between w-full items-center"},Vo=h(()=>s("span",{class:"text-2xl font-medium"},"Участники",-1)),Oo={class:"enrolledStudents-container"},Lo={class:"search-filter-form"},Fo={class:"flex flex-wrap gap-3"},Eo={class:"mb-4"},To=h(()=>s("label",{for:"searchOwners",class:"block text-lg font-medium mb-1"},"ФИО",-1)),jo={class:"mb-4"},Ao=h(()=>s("label",{for:"groupsOwners",class:"block text-lg font-medium mb-1"},"Группа",-1)),Mo=h(()=>s("option",{value:null},"Все группы",-1)),No=["value"],Bo={class:"mb-4"},Ro=h(()=>s("label",{for:"lastNameLetterOwners",class:"block text-lg font-medium mb-1"},"Первая буква фамилии:",-1)),Po=h(()=>s("option",{value:null},"Все буквы",-1)),qo=["value"],zo={class:"w-full"},Go={class:"flex justify-between w-full items-center mb-2"},Io=h(()=>s("label",{class:"block text-2xl font-medium mb-3"},"Выбор владельцев",-1)),Zo={class:"flex flex-col gap-5"},Ko={class:"flex justify-between w-full items-center"},Wo=h(()=>s("span",{class:"text-2xl font-medium"},"Владельцы",-1)),Qo={class:"flex flex-col p-3 gap-3"},Ho={key:0,class:"files-container"},Jo=["href"],Yo={class:"content-wrapper-header"},Xo={class:"file-icon-wrapper"},en={class:"file-name text-lg"},tn={class:"file-extension"},sn={__name:"create",setup(ne){ns({title:"Создание курса"});const Ye={pdf:ps,doc:Ke,docx:Ke,xls:We,xlsx:We,ppt:Qe,pptx:Qe,zip:He,rar:He,jpg:be,jpeg:be,png:be,gif:be,mp3:Je,wav:Je,mp4:Ue,mov:Ue,avi:Ue,txt:Ze,url:$e,folder:De,video:Se},ie=Zt(),ae=qt("token"),F=zt(),we=v(),{$toast:H}=Ht(),T=v(""),j=v(null),A=v(null),ye=v([]),Ve="АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ".split(""),Oe=v([]),re=v(!1),J=v(!1);let l=is();const ke=v([]),M=v([]);v([]);const N=v([]);v([]);const ce=v(null),Y=v({}),de=v(!1),B=v(""),R=v(null),P=v(null),q=v([]),z=v([]),Xe=v(null),ue=v(!1);Gt(()=>{tt(),st(),lt()}),It(()=>{F.currentRoute.value.query.id?et(F.currentRoute.value.query.id):l.value=as});const et=async t=>{try{J.value=!0,t=parseInt(t),l.value.id!==t&&(l.value=await Ge(t,!0))}catch(e){console.error("Failed to load course data:",e)}J.value=!1},tt=async()=>{try{const t=await fetch(`${ie.public.apiBase}/categories`,{method:"GET",headers:{Authorization:`${ae.value}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch categories");const e=await t.json();Oe.value=e}catch(t){console.error("Error loading categories:",t)}},st=async()=>{try{const t=await fetch(`${ie.public.apiBase}/groups`,{method:"GET",headers:{Authorization:`${ae.value}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch categories");const e=await t.json();ye.value=e}catch(t){console.error("Error loading groups:",t)}},lt=async()=>{try{const t=await fetch(`${ie.public.apiBase}/users`,{method:"GET",headers:{Authorization:`${ae.value}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch users");const e=await t.json();ke.value=e}catch(t){console.error("Error loading users:",t)}},ot=le(()=>{let t=[...ke.value];if(t.forEach(e=>{e.fullname=`${e.last_name} ${e.first_name} ${e.middle_name}`}),T.value.trim()!==""&&(t=t.filter(e=>e.fullname.toLowerCase().includes(T.value.toLowerCase()))),j.value&&(t=t.filter(e=>e.groups.some(f=>f.id===j.value))),A.value){const e=A.value.toLowerCase();t=t.filter(f=>f.last_name.toLowerCase().startsWith(e))}return t}),nt=t=>{l.value.enrolledStudents.some(e=>e.id===t.id)?console.log("Пользователь уже добавлен"):(l.value.enrolledStudents.push(t),console.log(l.value.enrolledStudents))},it=t=>{const e=l.value.enrolledStudents.findIndex(f=>f===t);e!==-1&&l.value.enrolledStudents.splice(e,1)},at=le(()=>[...l.value.enrolledStudents]),rt=()=>{T.value="",j.value=null,A.value=null},ct=()=>{M.value.forEach(t=>{l.value.enrolledStudents.some(e=>e.id===t.id)||l.value.enrolledStudents.push(t)}),M.value=[]},dt=()=>{l.value.enrolledStudents=l.value.enrolledStudents.filter(t=>!N.value.includes(t)),N.value=[]},ut=le(()=>{let t=[...ke.value];if(t.forEach(e=>{e.fullname=`${e.last_name} ${e.first_name} ${e.middle_name}`}),B.value.trim()!==""&&(t=t.filter(e=>e.fullname.toLowerCase().includes(B.value.toLowerCase()))),R.value&&(t=t.filter(e=>e.groups.some(f=>f.id===R.value))),P.value){const e=P.value.toLowerCase();t=t.filter(f=>f.last_name.toLowerCase().startsWith(e))}return t}),pt=t=>{l.value.courseOwners.some(e=>e.id===t.id)?console.log("Владелец уже добавлен"):l.value.courseOwners.push(t)},mt=t=>{const e=l.value.courseOwners.findIndex(f=>f===t);e!==-1&&l.value.courseOwners.splice(e,1)},ft=le(()=>[...l.value.courseOwners]),vt=()=>{B.value="",R.value=null,P.value=null},ht=()=>{q.value.forEach(t=>{l.value.courseOwners.some(e=>e.id===t.id)||l.value.courseOwners.push(t)}),q.value=[]},gt=()=>{l.value.courseOwners=l.value.courseOwners.filter(t=>!z.value.includes(t)),z.value=[]},G=v(null);le(()=>{const t=G.value;if(t===-1)return null;const e=l.value.sections[t];return{index:t,name:e.name}});const I=v(!1),_t=t=>{l.value.sections[t].open=!l.value.sections[t].open},bt=(t,e)=>{l.value.sections[t].subsections[e].open=!l.value.sections[t].subsections[e].open},wt=t=>{const e={name:`Секция ${l.value.sections.length}`,open:!1,contents:[],editing:!1,subsections:[]};l.value.sections.splice(t+1,0,e)},yt=t=>{l.value.sections.splice(t,1)},kt=(t,e)=>{l.value.sections[t].subsections.splice(e,1)},xt=(t,e)=>{l.value.sections[t].contents.splice(e,1)},Ct=(t,e,f)=>{l.value.sections[t].subsections[e].contents.splice(f,1)},Le=(t,e=null)=>{F.push({path:"/materials/edit",query:{section:G.value,subsection:ce.value,materialId:e}})},Fe=(t,e=null)=>{G.value=t,console.log("subsectionIndex",e),e!==null&&(ce.value=e),I.value=!0},Z=t=>{if(I.value=!1,xe.value=t,F.currentRoute.value.query.id){F.push({path:"/materials/edit",query:{contentType:xe.value,section:G.value,subsection:ce.value,courseId:F.currentRoute.value.query.id}});return}F.push({path:"/materials/edit",query:{contentType:xe.value,section:G.value,subsection:ce.value}})},xe=v("text"),K=v(null),$t=t=>{l.value.sections[t].editing=!0,l.value.sections[t].editing&&K.value&&ze(()=>{K.value[0].focus()})},St=(t,e)=>{l.value.sections[t].subsections[e].editing=!0,l.value.sections[t].subsections[e].editing&&K.value&&ze(()=>{K.value[0].focus()})},Ee=t=>{l.value.sections[t].editing=!1},Te=(t,e)=>{l.value.sections[t].subsections[e].editing=!1},X=t=>{const e=t.split(".").pop().toLowerCase();return Ye[e]||Ze};let O=null,D=null,W=null;const pe=(t,e=null,f=null)=>{O=t,W=e,D=f},Dt=t=>{if(D===null){const e=l.value.sections[O];l.value.sections.splice(O,1),l.value.sections.splice(t,0,e),O=null}},Ut=(t,e)=>{if(D===null){const f=l.value.sections[t].subsections[W];l.value.sections[t].subsections.splice(W,1),l.value.sections[t].subsections.splice(e,0,f),W=null}},Vt=(t,e)=>{if(D!==null&&O===t){console.log(l.value.sections[t].contents);const f=l.value.sections[t].contents[D];l.value.sections[t].contents.splice(D,1),l.value.sections[t].contents.splice(e,0,f),D=null,O=null}},Ot=(t,e)=>{if(D!==null&&W===t){const f=l.value.sections[O].subsections[t].contents[D];l.value.sections[O].subsections[t].contents.splice(D,1),l.value.sections[O].subsections[t].contents.splice(e,0,f),D=null,O=null,W=null}},je=t=>/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(t),Lt=async()=>{try{if(J.value=!0,je(l.value.startDate+":00.000Z")?l.value.startDate=await l.value.startDate+":00.000Z":l.value.startDate=l.value.startDate+".000Z",je(l.value.endDate+":00.000Z")?l.value.endDate=await l.value.endDate+":00.000Z":l.value.endDate=l.value.endDate+".000Z",console.log(l.value),l.value.id)try{await rs(l.value.id,l.value),l.value=await Ge(id,!0)}catch(t){console.error("Error:",t)}else await cs(l.value);l.value.startDate=l.value.startDate.slice(0,-8),l.value.endDate=l.value.endDate.slice(0,-8),re.value=!0}catch(t){if(t.status)switch(t.status){case 400:H.add({severity:"warn",summary:"Ошибка",detail:"Введите название курса",life:5e3});break;default:H.add({severity:"warn",summary:"Ошибка",detail:"Внутренняя ошибка сервера",life:5e3})}else H.add({severity:"warn",summary:"Ошибка",detail:"Произошла неизвестная ошибка",life:5e3})}finally{J.value=!1}},Ft=t=>{l.value.sections[t].subsections.push({name:`Подтема ${l.value.sections[t].subsections.length+1}`,open:!0,contents:[],editing:!1}),H.add({severity:"success",summary:"Успешно",detail:"Создана подтема",life:3e3})};function me(t){try{return new URLSearchParams(new URL(t).search).get("v")??""}catch(e){return console.error(`Ошибка извлечения данных из ссылки ${e}`),""}}const Ae=t=>{we.value[0].toggle(t)},Me=t=>{Y.value=t,de.value=!0};function Et(){l.value.imageUrl&&(ue.value=!0)}const Tt=async()=>{try{const t=document.querySelector('.input-form input[type="file"]');if(!t||!t.files||t.files.length===0)throw new Error("Файл не выбран");let e=new FormData;e.append("files",t.files[0]);const f=await fetch(`${ie.public.apiBase}/files/upload`,{method:"POST",headers:{Authorization:ae.value},body:e});if(!f.ok)throw new Error("Ошибка при загрузке файла");const m=await f.json();switch(f.status){case 200:H.add({severity:"success",summary:"Успешно",detail:"Логотип загружен",life:3e3});break;case 500:alert("Файл не выбран");break;default:alert("Неизвестная ошибка")}l.value.imageUrl=m.files[0].path}catch(t){console.error("Невозможно отправить запрос",t),alert(`Ошибка: ${t.message}`)}},jt=t=>{const e=t.target.files[0];if(e){const f=new FileReader;f.onload=m=>{Xe.value=m.target.result},f.readAsDataURL(e),Tt()}};function At(){l.value.imageUrl=null;const t=document.querySelector('.input-form input[type="file"]');t.value=""}const Mt=t=>{t.target.dataset.replaced||(t.target.src="../../assets/imgs/no_course_photo.png",t.target.dataset.replaced="true")};return(t,e)=>{const f=Rt,m=Kt,Ne=Xt,Be=es,Nt=ts,Re=ss,x=ls,fe=os;return a(),r(b,null,[i(ds,{complete:n(re),onToggleComplete:e[0]||(e[0]=o=>re.value=!n(re))},null,8,["complete"]),n(J)?(a(),Ce(f,{key:0})):_("",!0),s("div",fs,[s("div",vs,[s("h1",null,p(n(l).name?n(l).name:"Без названия"),1),i(m,{label:"Сохранить",onClick:e[1]||(e[1]=o=>Lt())})]),s("div",hs,[i(us,null,{default:g(()=>[i(_e,{title:"Содержание",style:{width:"80%"}},{default:g(()=>[s("div",gs,[(a(!0),r(b,null,w(n(l).sections,(o,u)=>(a(),r("div",{key:u,class:""},[s("div",{class:"section-wrapper",onClick:c=>_t(u)},[s("div",bs,[s("div",ws,[s("i",{class:"pi pi-bars drag-icon move",onClick:e[2]||(e[2]=k(()=>{},["stop"])),draggable:n(D)===null,onDragstart:c=>pe(u),onDragover:e[3]||(e[3]=k(()=>{},["prevent"])),onDrop:c=>Dt(u)},null,40,ys),s("i",{class:Pe(o.open?"pi pi-chevron-down":"pi pi-chevron-right")},null,2),o.editing?S((a(),r("input",{key:0,ref_for:!0,ref_key:"inputField",ref:K,"onUpdate:modelValue":c=>o.name=c,class:"section-title-input text-2xl",onKeydown:qe(c=>Ee(u),["enter"]),onBlur:c=>Ee(u),onClick:e[4]||(e[4]=k(()=>{},["stop"]))},null,40,ks)),[[L,o.name]]):(a(),r("span",xs,p(o.name),1))]),s("div",Cs,[i(m,{icon:"pi pi-pencil",class:"edit-section-btn",onClick:k(c=>$t(u),["stop"])},null,8,["onClick"]),u!==0?(a(),Ce(m,{key:0,icon:"pi pi-times",class:"delete-section-btn",onClick:k(c=>yt(u),["stop"])},null,8,["onClick"])):_("",!0)])]),o.open?(a(),r("div",{key:0,class:"section-content",onClick:e[11]||(e[11]=k(()=>{},["stop"]))},[s("div",$s,[(a(!0),r(b,null,w(n(l).sections[u].subsections,(c,y)=>(a(),r("div",{key:y,class:""},[s("div",{class:"section-wrapper",onClick:d=>bt(u,y)},[s("div",Ds,[s("div",Us,[s("i",{class:"pi pi-bars drag-icon move",onClick:e[5]||(e[5]=k(()=>{},["stop"])),draggable:n(D)===null,onDragstart:d=>pe(u,y),onDragover:e[6]||(e[6]=k(()=>{},["prevent"])),onDrop:d=>Ut(u,y)},null,40,Vs),s("i",{class:Pe(c.open?"pi pi-chevron-down":"pi pi-chevron-right")},null,2),c.editing?S((a(),r("input",{key:0,ref_for:!0,ref_key:"inputField",ref:K,"onUpdate:modelValue":d=>c.name=d,class:"section-title-input text-2xl",onKeydown:qe(d=>Te(u,y),["enter"]),onBlur:d=>Te(u,y),onClick:e[7]||(e[7]=k(()=>{},["stop"]))},null,40,Os)),[[L,c.name]]):(a(),r("span",Ls,p(c.name),1))]),s("div",Fs,[i(m,{icon:"pi pi-pencil",class:"edit-section-btn",onClick:k(d=>St(u,y),["stop"])},null,8,["onClick"]),i(m,{icon:"pi pi-times",class:"delete-section-btn",onClick:k(d=>kt(u,y),["stop"])},null,8,["onClick"])])]),c.open?(a(),r("div",{key:0,class:"section-content",onClick:e[9]||(e[9]=k(()=>{},["stop"]))},[(a(!0),r(b,null,w(c.contents,(d,E)=>{var ee,te,$,Q;return a(),r("div",{class:"flex items-start",key:E,draggable:!0,onDragstart:C=>pe(u,y,E),onDragover:e[8]||(e[8]=k(()=>{},["prevent"])),onDrop:C=>Ot(y,E)},[s("div",Ts,[!d.urlItem&&((ee=d.materials)==null?void 0:ee.length)<=0&&((te=d.folders)==null?void 0:te.length)<=0&&!d.urlVideo&&(($=d.tasks)==null?void 0:$.length)<=0?(a(),r("label",js,p(d.title),1)):_("",!0),d.tasks&&d.tasks[0]?(a(),r("div",{key:1,class:"content-wrapper",onClick:C=>Me(d.tasks[0])},[s("div",Ms,[Ns,s("label",Bs,p(d.tasks[0].name),1)])],8,As)):d.urlItem?(a(),r("a",{key:2,href:d.urlItem,class:"content-wrapper text-lg cursor-alias"},[s("div",Ps,[i(n(V),{icon:n($e),class:"file-icon"},null,8,["icon"]),he(" "+p(d.title),1)]),s("div",qs,p(n(Ie)(d.urlItem)),1)],8,Rs)):_("",!0),d.content?(a(),r("p",zs,p(d.content),1)):_("",!0),d.materials&&d.materials.length>0?(a(),r("div",Gs,[(a(!0),r(b,null,w(d.materials,(C,se)=>(a(),r("div",{key:se,class:"w-full"},[s("a",{href:C.path,download:"",class:"content-wrapper"},[s("div",Zs,[s("div",Ks,[i(n(V),{icon:X(C.name),class:"file-icon"},null,8,["icon"])]),s("span",Ws,p(d.title),1)]),s("div",Qs,p(n(oe)(C.name)),1)],8,Is)]))),128))])):_("",!0),d.urlVideo?(a(),r("div",Hs,[s("div",Js,[i(n(V),{icon:n(Se),class:"file-icon text-lg"},null,8,["icon"]),he(" "+p(d.title),1)]),d.urlVideo.includes("youtube.com/watch?v=")?(a(),r("iframe",{key:0,width:"560",height:"315",srcdoc:`<style>*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img{position:absolute;width:100%;top:0;bottom:0;margin:auto}button{position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;background:rgba(0,0,0,0.5);color:white;font-size:20px;border:none;cursor:pointer}button:hover{background:rgba(0,0,0,0.7)}</style><a href=https://www.youtube.com/embed/${me(d.urlVideo)}?autoplay=1><img src=https://img.youtube.com/vi/${me(d.urlVideo)}/hqdefault.jpg alt='${d.title}'><button>Нажмите для воспроизведения</button></a>`,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,Ys)):_("",!0)])):_("",!0),d.folders&&((Q=d.folders)==null?void 0:Q.length)>0?(a(),r("div",Xs,[(a(!0),r(b,null,w(d.folders,(C,se)=>(a(),r("div",{key:se,class:"flex flex-col"},[s("div",{class:"content-wrapper",onClick:Ae},[s("div",el,[i(n(V),{icon:n(De),class:"text-lg"},null,8,["icon"]),s("label",null,p(C.name),1)])]),i(Ne,{ref_for:!0,ref_key:"op",ref:we},{default:g(()=>[s("div",tl,[(a(!0),r(b,null,w(C.materials,(ve,Bt)=>(a(),r("a",{href:ve.path,download:"",class:"content-wrapper pl-3",key:Bt},[s("div",ll,[s("div",ol,[i(n(V),{icon:X(ve.name),class:"file-icon"},null,8,["icon"])]),s("span",nl,p(ve.name),1)]),s("div",il,p(n(oe)(ve.name)),1)],8,sl))),128))])]),_:2},1536)]))),128))])):_("",!0)]),s("div",al,[i(m,{icon:"pi pi-pencil",class:"edit-section-btn",onClick:k(C=>Le(u,d.id),["stop"])},null,8,["onClick"]),i(m,{icon:"pi pi-trash",class:"delete-content-btn",onClick:C=>Ct(u,y,E)},null,8,["onClick"])])],40,Es)}),128)),s("div",rl,[i(m,{label:"",icon:"pi pi-plus",class:"add-content-btn",onClick:d=>Fe(u,y)},null,8,["onClick"])])])):_("",!0)],8,Ss)]))),128))]),(a(!0),r(b,null,w(o.contents,(c,y)=>{var d,E,ee,te;return a(),r("div",{class:"flex items-start",key:y,draggable:!0,onDragstart:$=>pe(u,null,y),onDragover:e[10]||(e[10]=k(()=>{},["prevent"])),onDrop:$=>Vt(u,y)},[s("div",dl,[!c.urlItem&&((d=c.materials)==null?void 0:d.length)<=0&&((E=c.folders)==null?void 0:E.length)<=0&&!c.urlVideo&&((ee=c.tasks)==null?void 0:ee.length)<=0?(a(),r("label",ul,p(c.title),1)):_("",!0),c.tasks&&c.tasks[0]?(a(),r("div",{key:1,class:"content-wrapper",onClick:$=>Me(c.tasks[0])},[s("div",ml,[fl,s("label",vl,p(c.tasks[0].name),1)])],8,pl)):c.urlItem?(a(),r("a",{key:2,href:c.urlItem,class:"content-wrapper text-lg cursor-alias"},[s("div",gl,[i(n(V),{icon:n($e),class:"file-icon"},null,8,["icon"]),he(" "+p(c.title),1)]),s("div",_l,p(n(Ie)(c.urlItem)),1)],8,hl)):_("",!0),c.content?(a(),r("p",bl,p(c.content),1)):_("",!0),c.materials&&c.materials.length>0?(a(),r("div",wl,[(a(!0),r(b,null,w(c.materials,($,Q)=>(a(),r("div",{key:Q,class:"w-full"},[s("a",{href:$.path,download:"",class:"content-wrapper"},[s("div",kl,[s("div",xl,[i(n(V),{icon:X($.name),class:"file-icon"},null,8,["icon"])]),s("span",Cl,p(c.title),1)]),s("div",$l,p(n(oe)($.name)),1)],8,yl)]))),128))])):_("",!0),c.urlVideo?(a(),r("div",Sl,[s("div",Dl,[i(n(V),{icon:n(Se),class:"file-icon text-lg"},null,8,["icon"]),he(" "+p(c.title),1)]),c.urlVideo.includes("youtube.com/watch?v=")?(a(),r("iframe",{key:0,width:"560",height:"315",srcdoc:`<style>*{padding:0;margin:0;overflow:hidden}html,body{height:100%}img{position:absolute;width:100%;top:0;bottom:0;margin:auto}button{position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;background:rgba(0,0,0,0.5);color:white;font-size:20px;border:none;cursor:pointer}button:hover{background:rgba(0,0,0,0.7)}</style><a href=https://www.youtube.com/embed/${me(c.urlVideo)}?autoplay=1><img src=https://img.youtube.com/vi/${me(c.urlVideo)}/hqdefault.jpg alt='${c.title}'><button>Нажмите для воспроизведения</button></a>`,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,Ul)):_("",!0)])):_("",!0),c.folders&&((te=c.folders)==null?void 0:te.length)>0?(a(),r("div",Vl,[(a(!0),r(b,null,w(c.folders,($,Q)=>(a(),r("div",{key:Q,class:"flex flex-col"},[s("div",{class:"content-wrapper",onClick:Ae},[s("div",Ol,[i(n(V),{icon:n(De),class:"text-lg"},null,8,["icon"]),s("label",null,p($.name),1)])]),i(Ne,{ref_for:!0,ref_key:"op",ref:we},{default:g(()=>[s("div",Ll,[(a(!0),r(b,null,w($.materials,(C,se)=>(a(),r("a",{href:C.path,download:"",class:"content-wrapper pl-3",key:se},[s("div",El,[s("div",Tl,[i(n(V),{icon:X(C.name),class:"file-icon"},null,8,["icon"])]),s("span",jl,p(C.name),1)]),s("div",Al,p(n(oe)(C.name)),1)],8,Fl))),128))])]),_:2},1536)]))),128))])):_("",!0)]),s("div",Ml,[i(m,{icon:"pi pi-pencil",class:"edit-section-btn",onClick:k($=>Le(u,c.id),["stop"])},null,8,["onClick"]),i(m,{icon:"pi pi-trash",class:"delete-content-btn",onClick:$=>xt(u,y)},null,8,["onClick"])])],40,cl)}),128)),s("div",Nl,[i(m,{label:"Добавить материал",icon:"pi pi-plus",class:"add-content-btn mt-2",onClick:c=>Fe(u)},null,8,["onClick"])])])):_("",!0)],8,_s),s("div",Bl,[Rl,i(m,{icon:"pi pi-plus",class:"add-section-btn",rounded:"",outlined:"",onClick:c=>wt(u)},null,8,["onClick"]),Pl])]))),128)),i(Be,{visible:n(I),"onUpdate:visible":e[20]||(e[20]=o=>U(I)?I.value=o:null),style:{width:"450px"},header:"Тип материала",modal:!0,dismissableMask:"",class:"p-fluid"},{footer:g(()=>[i(m,{label:"Отмена",icon:"pi pi-times",class:"p-button-text w-min",onClick:e[19]||(e[19]=o=>I.value=!1)})]),default:g(()=>[s("div",ql,[i(m,{label:"Текст",icon:"pi pi-align-justify",class:"p-button-text w-min",onClick:e[12]||(e[12]=o=>Z("text"))}),i(m,{label:"Подтема",icon:"pi pi-clone",class:"p-button-text w-min",onClick:e[13]||(e[13]=o=>Ft(n(G)))}),i(m,{label:"Ссылка",icon:"pi pi-link",class:"p-button-text w-min",onClick:e[14]||(e[14]=o=>Z("urlItem"))}),i(m,{label:"Видео (ссылка)",icon:"pi pi-video",class:"p-button-text w-min",onClick:e[15]||(e[15]=o=>Z("urlVideo"))}),i(m,{label:"Файл",icon:"pi pi-file",class:"p-button-text w-min",onClick:e[16]||(e[16]=o=>Z("file"))}),i(m,{label:"Папка",icon:"pi pi-folder",class:"p-button-text w-min",onClick:e[17]||(e[17]=o=>Z("folder"))}),i(m,{label:"Задание",icon:"pi pi-graduation-cap",class:"p-button-text w-min",onClick:e[18]||(e[18]=o=>Z("tasks"))})])]),_:1},8,["visible"])])]),_:1}),i(_e,{title:"Настройки",style:{width:"42.5%"}},{default:g(()=>[s("div",null,[s("form",{onSubmit:e[31]||(e[31]=k(()=>{},["prevent"])),class:"flex gap-3 flex-col items-stretch"},[s("div",zl,[Gl,S(s("input",{"onUpdate:modelValue":e[21]||(e[21]=o=>n(l).name=o),type:"text",id:"name",name:"name",placeholder:n(l).name,class:"inpt mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-lg border-gray-300 rounded-md"},null,8,Il),[[L,n(l).name]])]),s("div",Zl,[Kl,S(s("textarea",{"onUpdate:modelValue":e[22]||(e[22]=o=>n(l).description=o),id:"description",name:"description",rows:"3",class:"inpt mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-lg border-gray-300 rounded-md"},null,512),[[L,n(l).description]])]),s("div",Wl,[Ql,s("div",Hl,[s("img",{src:n(l).imageUrl?`${n(l).imageUrl}`:"../../assets/imgs/no_course_photo.png",alt:"logo",class:"max-h-[300px]",onError:Mt,onClick:Et},null,40,Jl),n(l).imageUrl?(a(),r("div",{key:0,class:"icon-close close-button",onClick:At})):_("",!0),(a(),Ce(Wt,{to:"body"},[i(ms,{onClose:e[23]||(e[23]=o=>ue.value=!n(ue)),modalActive:n(ue)},{default:g(()=>[s("div",Yl,[n(l).imageUrl?(a(),r("img",{key:0,src:n(l).imageUrl,alt:"logo",style:{"max-width":"100%","max-height":"100%"}},null,8,Xl)):_("",!0)])]),_:1},8,["modalActive"])]))]),s("input",{type:"file",name:"logo",id:"logo",onChange:jt},null,32)]),s("div",eo,[to,S(s("input",{"onUpdate:modelValue":e[24]||(e[24]=o=>n(l).isActive=o),type:"checkbox",class:"form-checkbox checkbox m-0 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[Qt,n(l).isActive]])]),s("div",so,[lo,S(s("input",{"onUpdate:modelValue":e[25]||(e[25]=o=>n(l).startDate=o),type:"datetime-local",id:"start_date",name:"start_date",onChange:e[26]||(e[26]=(...o)=>t.updateStartDate&&t.updateStartDate(...o)),class:"inpt mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-lg border-gray-300 rounded-md"},null,544),[[L,n(l).startDate]])]),s("div",oo,[no,S(s("input",{"onUpdate:modelValue":e[27]||(e[27]=o=>n(l).endDate=o),type:"datetime-local",id:"end_date",name:"end_date",onChange:e[28]||(e[28]=(...o)=>t.updateEndDate&&t.updateEndDate(...o)),class:"inpt mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-lg border-gray-300 rounded-md"},null,544),[[L,n(l).endDate]])]),s("div",io,[ao,S(s("input",{"onUpdate:modelValue":e[29]||(e[29]=o=>n(l).duration_hours=o),type:"number",id:"duration_hours",name:"duration_hours",class:"inpt mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-lg border-gray-300 rounded-md"},null,512),[[L,n(l).duration_hours]])]),s("div",ro,[co,i(Nt,{modelValue:n(l).categories,"onUpdate:modelValue":e[30]||(e[30]=o=>n(l).categories=o),options:n(Oe),filter:"",optionLabel:"name",placeholder:"Выберите категории",class:"w-full max-w-full"},null,8,["modelValue","options"])])],32)])]),_:1}),i(_e,{title:"Участники",class:"flex flex-col gap-5"},{default:g(()=>[s("div",uo,[s("div",po,[s("div",mo,[s("div",fo,[vo,S(s("input",{type:"text","onUpdate:modelValue":e[32]||(e[32]=o=>U(T)?T.value=o:null),id:"search",name:"search",placeholder:"Введите ФИО",class:"inpt form-input rounded-md shadow-sm w-full"},null,512),[[L,n(T)]])]),s("div",ho,[go,S(s("select",{"onUpdate:modelValue":e[33]||(e[33]=o=>U(j)?j.value=o:null),id:"group",name:"group",class:"form-select rounded-md shadow-sm w-full"},[_o,(a(!0),r(b,null,w(n(ye),o=>(a(),r("option",{key:o.id,value:o.id},p(o.abbreviation),9,bo))),128))],512),[[ge,n(j)]])]),s("div",wo,[yo,S(s("select",{"onUpdate:modelValue":e[34]||(e[34]=o=>U(A)?A.value=o:null),id:"lastNameLetter",name:"lastNameLetter",class:"form-select rounded-md shadow-sm w-full"},[ko,(a(!0),r(b,null,w(n(Ve),o=>(a(),r("option",{key:o,value:o},p(o),9,xo))),128))],512),[[ge,n(A)]])])]),i(m,{label:"Сбросить фильтры",icon:"pi pi-times",class:"p-button-secondary w-[15rem]",onClick:rt})]),i(Re),s("div",Co,[s("div",$o,[So,i(m,{label:"Добавить",icon:"pi pi-check",class:"p-button-success",disabled:!n(M).length>0,onClick:ct},null,8,["disabled"])]),i(fe,{value:n(ot),showGridlines:"",paginator:!0,rows:10,tableStyle:"min-width: 35rem",selection:n(M),"onUpdate:selection":e[35]||(e[35]=o=>U(M)?M.value=o:null)},{default:g(()=>[i(x,{selectionMode:"multiple",style:{width:"1rem"}}),i(x,{field:"fullname",header:"ФИО",style:{width:"70%"}}),i(x,{field:"groups",header:"Группа",style:{width:"25%"}},{body:g(({data:o})=>[(a(!0),r(b,null,w(o.groups,(u,c)=>(a(),r("span",{key:c},p(u.abbreviation)+p(c===o.groups.length-1?"":", "),1))),128))]),_:1}),i(x,{exportable:!1,style:{width:"1rem"}},{body:g(o=>[i(m,{icon:"pi pi-plus",class:"p-button-success",onClick:u=>nt(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection"])])]),s("div",Do,[s("div",Uo,[Vo,i(m,{label:"Удалить",icon:"pi pi-times",class:"p-button-danger h-min",disabled:!n(N).length>0,onClick:dt},null,8,["disabled"])]),i(fe,{selection:n(N),"onUpdate:selection":e[36]||(e[36]=o=>U(N)?N.value=o:null),value:n(at),showGridlines:"",paginator:!0,rows:10,tableStyle:"min-width: 30rem"},{default:g(()=>[i(x,{selectionMode:"multiple",style:{width:"1rem"}}),i(x,{field:"fullname",header:"ФИО",style:{width:"70%"}}),i(x,{field:"groups",header:"Группа",style:{width:"25%"}},{body:g(({data:o})=>[(a(!0),r(b,null,w(o.groups,(u,c)=>(a(),r("span",{key:c},p(u.abbreviation)+p(c===o.groups.length-1?"":", "),1))),128))]),_:1}),i(x,{exportable:!1,style:{width:"1rem"}},{body:g(o=>[i(m,{icon:"pi pi-trash",class:"p-button-danger",onClick:u=>it(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value"])])]),_:1}),i(_e,{title:"Владельцы",class:"flex flex-col gap-5"},{default:g(()=>[s("div",Oo,[s("div",Lo,[s("div",Fo,[s("div",Eo,[To,S(s("input",{type:"text","onUpdate:modelValue":e[37]||(e[37]=o=>U(B)?B.value=o:null),id:"searchOwners",name:"searchOwners",placeholder:"Введите ФИО",class:"inpt form-input rounded-md shadow-sm w-full"},null,512),[[L,n(B)]])]),s("div",jo,[Ao,S(s("select",{"onUpdate:modelValue":e[38]||(e[38]=o=>U(R)?R.value=o:null),id:"groupsOwners",name:"groupsOwners",class:"form-select rounded-md shadow-sm w-full"},[Mo,(a(!0),r(b,null,w(n(ye),o=>(a(),r("option",{key:o.id,value:o.id},p(o.abbreviation),9,No))),128))],512),[[ge,n(R)]])]),s("div",Bo,[Ro,S(s("select",{"onUpdate:modelValue":e[39]||(e[39]=o=>U(P)?P.value=o:null),id:"lastNameLetterOwners",name:"lastNameLetterOwners",class:"form-select rounded-md shadow-sm w-full"},[Po,(a(!0),r(b,null,w(n(Ve),o=>(a(),r("option",{key:o,value:o},p(o),9,qo))),128))],512),[[ge,n(P)]])])]),i(m,{label:"Сбросить фильтры",icon:"pi pi-times",class:"p-button-secondary w-[15rem]",onClick:vt})]),i(Re),s("div",zo,[s("div",Go,[Io,i(m,{label:"Добавить",icon:"pi pi-check",class:"p-button-success",disabled:!n(q).length>0,onClick:ht},null,8,["disabled"])]),i(fe,{value:n(ut),showGridlines:"",paginator:!0,rows:10,tableStyle:"min-width: 35rem",selection:n(q),"onUpdate:selection":e[40]||(e[40]=o=>U(q)?q.value=o:null)},{default:g(()=>[i(x,{selectionMode:"multiple",style:{width:"1rem"}}),i(x,{field:"fullname",header:"ФИО",style:{width:"70%"}}),i(x,{field:"groups",header:"Группа",style:{width:"25%"}},{body:g(({data:o})=>[(a(!0),r(b,null,w(o.groups,(u,c)=>(a(),r("span",{key:c},p(u.abbreviation)+p(c===o.groups.length-1?"":", "),1))),128))]),_:1}),i(x,{exportable:!1,style:{width:"1rem"}},{body:g(o=>[i(m,{icon:"pi pi-plus",class:"p-button-success",onClick:u=>pt(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection"])])]),s("div",Zo,[s("div",Ko,[Wo,i(m,{label:"Удалить",icon:"pi pi-times",class:"p-button-danger h-min",disabled:!n(z).length>0,onClick:gt},null,8,["disabled"])]),i(fe,{selection:n(z),"onUpdate:selection":e[41]||(e[41]=o=>U(z)?z.value=o:null),value:n(ft),showGridlines:"",paginator:!0,rows:10,tableStyle:"min-width: 30rem"},{default:g(()=>[i(x,{selectionMode:"multiple",style:{width:"1rem"}}),i(x,{field:"fullname",header:"ФИО",style:{width:"70%"}}),i(x,{field:"groups",header:"Группа",style:{width:"25%"}},{body:g(({data:o})=>[(a(!0),r(b,null,w(o.groups,(u,c)=>(a(),r("span",{key:c},p(u.abbreviation)+p(c===o.groups.length-1?"":", "),1))),128))]),_:1}),i(x,{exportable:!1,style:{width:"1rem"}},{body:g(o=>[i(m,{icon:"pi pi-trash",class:"p-button-danger",onClick:u=>mt(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["selection","value"])])]),_:1})]),_:1})])]),i(Be,{visible:n(de),"onUpdate:visible":e[42]||(e[42]=o=>U(de)?de.value=o:null),modal:"",header:n(Y).name,class:"max-w-[700px]",dismissableMask:""},{default:g(()=>[s("div",Qo,[s("p",null,p(n(Y).text),1),n(Y).materials.length>0?(a(),r("div",Ho,[(a(!0),r(b,null,w(n(Y).materials,(o,u)=>(a(),r("div",{key:u,class:"w-full"},[s("a",{href:o.path,download:"",class:"content-wrapper"},[s("div",Yo,[s("div",Xo,[i(n(V),{icon:X(o.name),class:"file-icon"},null,8,["icon"])]),s("span",en,p(o.name),1)]),s("div",tn,p(n(oe)(o.name)),1)],8,Jo)]))),128))])):_("",!0)])]),_:1},8,["visible","header"])],64)}}},qn=Pt(sn,[["__scopeId","data-v-e8df5978"]]);export{qn as default};
