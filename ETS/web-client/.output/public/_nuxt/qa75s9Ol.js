import U from"./v4Gjdufp.js";import{_ as R}from"./CxKW6yKe.js";import{_ as q,b as L,r as n,e as b,f as e,C as S,h as s,R as B,t as E,n as k,D as u,E as d,g as f,i as P,w as T,m as C,k as D,c as v,j as g,v as I,x as M,u as N}from"./Bn8s6ksr.js";import{u as A}from"./Ct7qimw6.js";import{A as z}from"./CmGhXXe7.js";import{r as j}from"./pcZBtJnj.js";import"./CaQe4QZp.js";import"./wL0GXdHM.js";import"./Beh2qRuB.js";import"./CVaRbyVJ.js";const l=p=>(I("data-v-42ecb89f"),p=p(),M(),p),F={class:"main-content"},H={class:"register-form"},O=l(()=>e("h1",{class:"logo-text"},[g("EduTech "),e("br"),g(),e("span",{class:"text-3xl"},"solution")],-1)),Z=l(()=>e("h2",null,"Регистрация",-1)),$={class:"flex flex-wrap gap-3"},G={class:"input-group flex-1"},J=l(()=>e("label",{for:"first_name"},"Имя",-1)),K={class:"input-group flex-1"},Q=l(()=>e("label",{for:"last_name"},"Фамилия",-1)),W={class:"input-group flex-1"},X=l(()=>e("label",{for:"middle_name"},"Отчество",-1)),Y={class:"input-group"},ee=l(()=>e("label",{for:"email"},"Email",-1)),te={class:"input-group"},se=l(()=>e("label",{for:"username"},"Логин",-1)),ae={class:"input-group"},oe=l(()=>e("label",{for:"password"},"Пароль",-1)),le={class:"input-group"},re=l(()=>e("label",{for:"confirmPassword"},"Подтвердите пароль",-1)),ne={__name:"registration",setup(p){A({title:"Регистрация"});const c=L(),i=n(!1),r=n(""),_=n(!1),a=n({first_name:"",last_name:"",middle_name:"",username:"",email:"",password:""}),m=n(""),w=n("");c.currentRoute.value.query.token&&(w.value=c.currentRoute.value.query.token);const h=async()=>{if(a.value.password!==m.value){r.value="Пароли не совпадают",i.value=!0;return}if(!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{7,}$/.test(a.value.password)){r.value="Пароль должен содержать как минимум 1 специальный символ, маленькие и большие буквы латинского алфавита, 1 цифру, и быть длиннее 7 символов",i.value=!0;return}_.value=!0;try{await j(a.value,w.value),N("token").value=null,await c.push("/")}catch(t){if(console.error("Error register User:",t),t.status)switch(t.status){case 400:r.value="Некорректные данные пользователя";break;case 404:r.value="Ссылка для регистрации не найдена или истекла";break;case 500:default:r.value="Внутренняя ошибка сервера"}else r.value="Произошла неизвестная ошибка";i.value=!0}finally{_.value=!1}};return(y,t)=>{const x=U,V=R;return v(),b(D,null,[e("div",F,[e("div",H,[O,e("form",{class:"form",onSubmit:S(h,["prevent"])},[Z,s(i)?(v(),b("div",{key:0,autofocus:"",class:"error-block",style:B([s(i)?{opacity:1,padding:"16px"}:{opacity:0}])},[e("span",null,E(s(r)),1)],4)):k("",!0),e("div",$,[e("div",G,[J,u(e("input",{class:"inpt",type:"text",id:"first_name","onUpdate:modelValue":t[0]||(t[0]=o=>s(a).first_name=o)},null,512),[[d,s(a).first_name]])]),e("div",K,[Q,u(e("input",{class:"inpt",type:"text",id:"last_name","onUpdate:modelValue":t[1]||(t[1]=o=>s(a).last_name=o)},null,512),[[d,s(a).last_name]])]),e("div",W,[X,u(e("input",{class:"inpt",type:"text",id:"middle_name","onUpdate:modelValue":t[2]||(t[2]=o=>s(a).middle_name=o)},null,512),[[d,s(a).middle_name]])])]),e("div",Y,[ee,u(e("input",{class:"inpt",type:"email",id:"email","onUpdate:modelValue":t[3]||(t[3]=o=>s(a).email=o),required:""},null,512),[[d,s(a).email]])]),e("div",te,[se,u(e("input",{class:"inpt",type:"text",id:"username","onUpdate:modelValue":t[4]||(t[4]=o=>s(a).username=o),required:""},null,512),[[d,s(a).username]])]),e("div",ae,[oe,f(x,{id:"password","pt:input:root:class":"inpt w-full",modelValue:s(a).password,"onUpdate:modelValue":t[5]||(t[5]=o=>s(a).password=o),feedback:!0,required:"",weakLabel:"Слабый",mediumLabel:"Средний",strongLabel:"Сильный",promptLabel:"Введите пароль",toggleMask:""},null,8,["modelValue"])]),e("div",le,[re,f(x,{id:"confirmPassword","pt:input:root:class":"inpt w-full",modelValue:s(m),"onUpdate:modelValue":t[6]||(t[6]=o=>P(m)?m.value=o:null),required:"",feedback:!1,toggleMask:"",variant:"filled"},null,8,["modelValue"])]),f(z,{class:"btn"},{default:T(()=>[g("Зарегистрироваться")]),_:1})],32)])]),s(_)?(v(),C(V,{key:0})):k("",!0)],64)}}},we=q(ne,[["__scopeId","data-v-42ecb89f"]]);export{we as default};
