import x from"./v4Gjdufp.js";import{_ as k}from"./CxKW6yKe.js";import{a as S,_ as T,b as V,r as i,e as h,f as e,C,h as a,R as B,t as N,n as v,D as j,E as I,i as w,g as b,w as P,m as R,k as D,c as f,j as _,v as E,x as M,u as U,bP as q}from"./Bn8s6ksr.js";import{u as A}from"./Ct7qimw6.js";import{A as O}from"./CmGhXXe7.js";import{u as z,a as F}from"./7jZtv5KM.js";import"./CaQe4QZp.js";import"./wL0GXdHM.js";import"./Beh2qRuB.js";import"./CVaRbyVJ.js";import"./BXRJdK4x.js";const H=S();async function J(o,n){try{return await fetch(`${H.public.apiBase}/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:n})})}catch(l){console.log(l)}}const d=o=>(E("data-v-dbd2fb05"),o=o(),M(),o),L={class:"main-content"},$={class:"auth-form"},G=d(()=>e("h1",{class:"logo-text"},[_("EduTech "),e("br"),_(),e("span",{class:"text-3xl"},"solution")],-1)),K=d(()=>e("h2",null,"Вход",-1)),Q={class:"input-group"},W={class:"input-form"},X=d(()=>e("label",{for:"username"},"Электронная почта",-1)),Y={class:"input-form"},Z=d(()=>e("label",{style:{float:"left"},for:"password"},"Пароль",-1)),ee={__name:"index",setup(o){A({title:"Авторизация"}),V();const n=i(!1),l=i(""),c=i(""),u=i(""),p=i(!1);async function g(){p.value=!0;try{const s=await J(c.value,u.value);switch(s.status){case 200:console.log("Вы авторизованы");break;case 400:const r=await s.json();l.value=r.error,n.value=!0;break}const t=await s.json();t.token&&(await new Promise(r=>{U("token").value=t.token,r()}),await z(!0),F(!0),await q("/home"))}catch(s){console.log(s)}finally{p.value=!1}}return(s,t)=>{const r=x,y=k;return f(),h(D,null,[e("div",L,[e("div",$,[G,e("form",{class:"form",onSubmit:C(g,["prevent"])},[K,a(n)?(f(),h("div",{key:0,autofocus:"",class:"error-block",style:B([a(n)?{opacity:1,padding:"16px"}:{opacity:0}])},[e("span",null,N(a(l)),1)],4)):v("",!0),e("div",Q,[e("div",W,[X,j(e("input",{class:"inpt",id:"username",type:"text",placeholder:"Логин","onUpdate:modelValue":t[0]||(t[0]=m=>w(c)?c.value=m:null),required:""},null,512),[[I,a(c)]])]),e("div",Y,[Z,b(r,{id:"password","pt:input:root:class":"inpt w-full",modelValue:a(u),"onUpdate:modelValue":t[1]||(t[1]=m=>w(u)?u.value=m:null),required:"",feedback:!1,toggleMask:"",variant:"filled",autocomplete:"on",placeholder:"Введите пароль"},null,8,["modelValue"])])]),b(O,{class:"btn"},{default:P(()=>[_("Войти")]),_:1})],32)])]),a(p)?(f(),R(y,{key:0})):v("",!0)],64)}}},pe=T(ee,[["__scopeId","data-v-dbd2fb05"]]);export{pe as default};
